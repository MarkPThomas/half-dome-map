<!doctype html>
<html>
<head>
  <title>half-dome-map-app</title>
  <!-- Misc Scripts -->
  <script src="lib/underscore-min.js" type="text/javascript"></script>
  <script src="lib/jquery-1.11.0.min.js" type="text/javascript"></script>
  <!-- Leaflet -->
  <link rel="stylesheet" href="lib/leaflet.css" />
  <script src="lib/leaflet.js" type="text/javascript"></script>
  <!-- Leaflet Plugins -->
    <!-- Full Screen -->
  <link rel="stylesheet" href="lib/Control.FullScreen.css" /> 
  <script src="lib/Control.FullScreen.js" type="text/javascript"></script>
    <!-- Mini Map -->
  <link rel="stylesheet" href="lib/Control.MiniMap.css" /> 
  <script src="lib/Control.MiniMap.js" type="text/javascript"></script>
    <!-- Custom Scale -->
  <script src="lib/leaflet.customscale.js" type="text/javascript"></script>
    <!-- Spiderfy Marker Cluster -->
  <script src="lib/oms.min.js" type="text/javascript"></script>
    <!-- Drawing Plugins -->
      <!-- Plotter -->
        <!--<script src="lib/leaflet.plotter.min.js" type="text/javascript"></script> -->
        <!--<script src="lib/leaflet.plotter.js" type="text/javascript"></script> -->
      <!-- Leaflet Draw -->
        <link rel="stylesheet" href="lib/leaflet.draw.css" />
        <script src="lib/leaflet.draw.js"></script>
      <!-- Editable PolyLine  -->
        <script src="lib/leaflet-editable-polyline.js"></script>
  <!-- Custom Scripts -->
  <link rel="stylesheet" href="map.css" />
  <script src="map.js"></script>
  <script src="layers.js"></script>
</head>

<body>
  <h1>Hello!</h1>
  <p>Welcome to the Half Dome Map App</p>
  <div id="map"></div>
  
  <br/> <br/>
    <a href="javascript:void(dumpPoints())">Get points</a>
    <br/> <br/>
    <textarea id="pointsTextArea" rows="5" cols="70"></textarea>

  <script>
    var dumpPoints = function() {
            var pointsTextArea = document.getElementById('pointsTextArea');
            pointsTextArea.innerHTML = '';
            map.getEditablePolylines().forEach(function(polyline) {
                var points = polyline.getPoints();
                points.forEach(function(point) {
                    var latLng = point.getLatLng();
                    console.log(point.context);
                    pointsTextArea.innerHTML += 'originalPointNo=' + (point.context ? point.context.originalPointNo : null) //second part empties .originalPointNo for the next line
                                + ' originalPolylineNo=' + (point.context ? point.context.originalPolylineNo : null)
                                + ' (' + latLng.lat + ',' + latLng.lng + ')\n'; //The \n character is used to find a newline character. Twice seems to bring about a new line
                                + '\n';
                });
                pointsTextArea.innerHTML += '----------------------------------------------------------------------------------------------------\n';
            });
        };
  </script>
  
</body>
</html>